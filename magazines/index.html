<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>مكتبة المجلات | محمد عمر</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      background: linear-gradient(to bottom, #0c1427, #000);
      color: white;
      margin: 0;
      padding: 0;
      min-height: 100vh;
      font-family: 'Cairo', sans-serif;
    }
    .shelf {
      height: 32px;
      background: linear-gradient(to bottom, #8B4513, #5D2906);
      border-radius: 8px;
      box-shadow: inset 0 6px 12px rgba(0,0,0,0.7), 0 4px 8px rgba(0,0,0,0.9);
      margin: 0 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      letter-spacing: 1px;
    }
    .book {
      transition: transform 0.3s, box-shadow 0.3s;
      box-shadow: 0 10px 30px rgba(0,0,0,0.6);
      cursor: pointer;
      text-align: center;
    }
    .book:hover {
      transform: translateY(-10px) scale(1.03);
      box-shadow: 0 15px 40px rgba(0,191,255,0.4);
    }
    .book img {
      width: 100%;
      max-width: 180px;
      height: auto;
      object-fit: cover;
      border-radius: 8px;
      border: 2px solid transparent;
    }
    .book img:hover {
      border-color: #00bfff;
    }
    .book p {
      margin-top: 8px;
      font-size: 0.9rem;
      color: #31c5fd;
      font-weight: 600;
    }

    /* عارض المجلة */
    #viewer {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.95);
      z-index: 1000;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      padding: 20px;
    }
    #book-view {
      display: flex;
      width: 90%;
      max-width: 1200px;
      height: 80vh;
      gap: 10px;
    }
    .book-page {
      background: white;
      width: 50%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
      border-radius: 8px;
      box-shadow: 0 0 20px rgba(0,0,0,0.5);
      position: relative;
    }
    .book-page img {
      width: 95%;
      height: 95%;
      object-fit: contain;
    }
    #controls {
      margin-top: 20px;
      display: flex;
      gap: 20px;
    }
    .btn {
      background: rgba(0, 191, 255, 0.2);
      border: 2px solid #00bfff;
      color: white;
      padding: 10px 24px;
      border-radius: 50px;
      cursor: pointer;
      font-weight: bold;
      transition: all 0.3s;
    }
    .btn:hover {
      background: rgba(0, 191, 255, 0.4);
      transform: scale(1.05);
    }
    .btn-close {
      background: rgba(255, 255, 255, 0.1);
      border: 2px solid #fff;
    }
    .btn-close:hover {
      background: rgba(255, 255, 255, 0.2);
    }
  </style>
</head>
<body class="py-12 px-4">

  <!-- زر العودة -->
  <div class="text-center mb-8">
    <a href="../index.html" class="inline-block bg-cyan-600 hover:bg-cyan-500 text-white px-6 py-3 rounded-full font-bold">
      ← العودة إلى الرئيسية
    </a>
  </div>

  <!-- العنوان -->
  <div class="text-center mb-12">
    <h1 class="text-4xl md:text-5xl font-bold bg-gradient-to-r from-cyan-400 to-blue-400 bg-clip-text text-transparent">
      مكتبة المجلات الرقمية
    </h1>
    <p class="text-gray-300 mt-4 max-w-2xl mx-auto">
      اضغط على أي مجلّة لاستكشافها كما لو كنت تقلب صفحات كتاب ورقي.
    </p>
  </div>

  <!-- رف 1: 5 مجلات -->
  <div class="shelf mb-12">المجلات الأولى</div>
  <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-8 max-w-6xl mx-auto">
    <div class="book cursor-pointer" onclick="openMagazine('sun-kids')">
      <img src="../covers/sun-kids/222.jpg" alt="شمس الطفولة" class="w-full rounded-lg">
      <p>شمس الطفولة</p>
    </div>
    <div class="book cursor-pointer" onclick="openMagazine('egyptian-museum')">
      <img src="../covers/egyptian-museum/22.jpg" alt="المتحف المصري الكبير" class="w-full rounded-lg">
      <p>المتحف المصري</p>
    </div>
    <div class="book cursor-pointer" onclick="openMagazine('fashico')">
      <img src="../covers/fashico/fisging.jpg" alt="فاشن" class="w-full rounded-lg">
      <p>فاشن</p>
    </div>
    <div class="book cursor-pointer" onclick="openMagazine('packaging')">
      <img src="../covers/packaging.jpg" alt="تغليف منتجات" class="w-full rounded-lg">
      <p>تغليف منتجات</p>
    </div>
    <div class="book cursor-pointer" onclick="openMagazine('portfolio')">
      <img src="../covers/portfolio.jpg" alt="أعمالي المختارة" class="w-full rounded-lg">
      <p>أعمالي المختارة</p>
    </div>
  </div>

  <!-- رف 2: 5 مجلات -->
  <div class="shelf mb-12 mt-12">المجلات الثانية</div>
  <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-8 max-w-6xl mx-auto">
    <div class="book cursor-pointer" onclick="openMagazine('branding')">
      <img src="../covers/branding.jpg" alt="هويات بصرية" class="w-full rounded-lg">
      <p>هويات بصرية</p>
    </div>
    <div class="book cursor-pointer" onclick="openMagazine('social-media')">
      <img src="../covers/social-media.jpg" alt="محتوى السوشيال ميديا" class="w-full rounded-lg">
      <p>سوشيال ميديا</p>
    </div>
    <div class="book cursor-pointer" onclick="openMagazine('poster')">
      <img src="../covers/poster.jpg" alt="بوستر" class="w-full rounded-lg">
      <p>بوستر</p>
    </div>
    <div class="book cursor-pointer" onclick="openMagazine('logo')">
      <img src="../covers/logo.jpg" alt="تصميم شعار" class="w-full rounded-lg">
      <p>تصميم شعار</p>
    </div>
    <div class="book cursor-pointer" onclick="openMagazine('ui-ux')">
      <img src="../covers/ui-ux.jpg" alt="واجهة تطبيق" class="w-full rounded-lg">
      <p>واجهة تطبيق</p>
    </div>
  </div>

  <!-- عارض المجلة -->
  <div id="viewer">
    <div id="book-view">
      <div class="book-page" id="left-page">
        <img id="img-left" src="" alt="">
      </div>
      <div class="book-page" id="right-page">
        <img id="img-right" src="" alt="">
      </div>
    </div>
    <div id="controls">
      <button class="btn" onclick="prevPage()">‹ السابق</button>
      <button class="btn btn-close" onclick="closeViewer()">إغلاق</button>
      <button class="btn" onclick="nextPage()">التالي ›</button>
    </div>
  </div>

  <script>
    let currentMag = '';
    let currentPage = 0;
    let totalPages = 0;
    let pageList = [];

    async function openMagazine(folder) {
      try {
        // تحميل قائمة الصفحات
        const res = await fetch(`${folder}/pages.txt?nocache=${Date.now()}`);
        const text = await res.text();
        pageList = text.trim().split('\n').map(p => p.trim()).filter(p => p);
        totalPages = pageList.length;
        currentMag = folder;
        currentPage = 0; // يبدأ دائمًا من الصفحة 1
        
        showPage();
        document.getElementById('viewer').style.display = 'flex';
        document.body.style.overflow = 'hidden';
      } catch (err) {
        alert('فشل تحميل المجلة. تأكد من وجود مجلد "' + folder + '" وملف pages.txt فيه.');
        console.error(err);
      }
    }

    function showPage() {
      const leftImg = document.getElementById('img-left');
      const rightImg = document.getElementById('img-right');

      // الغلاف (صفحة واحدة في البداية)
      if (currentPage === 0) {
        leftImg.src = ''; // فارغ
        rightImg.src = `${currentMag}/${pageList[0]}`;
        return;
      }

      // الصفحات الداخلية (زوجية: يسار + يمين)
      const leftIndex = currentPage - 1;
      const rightIndex = currentPage;

      if (leftIndex >= 0) {
        leftImg.src = `${currentMag}/${pageList[leftIndex]}`;
      } else {
        leftImg.src = '';
      }

      if (rightIndex < totalPages) {
        rightImg.src = `${currentMag}/${pageList[rightIndex]}`;
      } else {
        rightImg.src = '';
      }
    }

    function nextPage() {
      if (currentPage < totalPages) {
        currentPage += 2;
        if (currentPage > totalPages) currentPage = totalPages;
        showPage();
      }
    }

    function prevPage() {
      if (currentPage > 0) {
        currentPage -= 2;
        if (currentPage < 0) currentPage = 0;
        showPage();
      }
    }

    function closeViewer() {
      document.getElementById('viewer').style.display = 'none';
      document.body.style.overflow = '';
    }
  </script>
</body>
</html>
